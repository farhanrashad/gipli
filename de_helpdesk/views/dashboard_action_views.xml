<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="action_dashboard_ticket_all" model="ir.actions.act_window">
        <field name="name">Tickets</field>
        <field name="res_model">project.task</field>
        <field name="view_mode">tree,kanban,activity,pivot,graph,cohort,form</field>
        <field name="search_view_id" ref="project_helpdesk_ticket_search_view"/>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('project_helpdesk_tickets_tree_view')}),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('project.view_task_kanban')}),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('project_ticket_pivot_view')}),
                (0, 0, {'view_mode': 'graph', 'view_id': ref('project_ticket_graph_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('project_ticket_form_view')}),
            ]"/>
        <field name="domain">[
            ('project_id.is_helpdesk_team', '=', True),
            ('is_ticket','=',True),
            ]
        </field>
    </record>

    <record id="action_dashboard_customer_rating" model="ir.actions.act_window">
        <field name="name">Customer Ratings</field>
        <field name="res_model">project.task</field>
        <field name="view_mode">kanban,tree,pivot,graph,form</field>
        <field name="search_view_id" ref="project_ticket_customer_ratings_search_view"/>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('project_task_customer_ratings_kanban_view')}),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('project_ticket_customer_rating_tree_view')}),
            (0, 0, {'view_mode': 'pivot', 'view_id': ref('project_ticket_customer_ratings_pivot_view')}),
            (0, 0, {'view_mode': 'graph', 'view_id': ref('project_ticket_customer_ratings_graph_view')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('project_ticket_customer_ratings_form_view')})]"
            />
        <field name="domain">[('customer_rating', 'in', ['1','2','3','4','5'])]</field>
    </record>


    <record id="report_project_ticket_analysis_pivot_open_hours" model="ir.ui.view">
        <field name="name">report.project.ticket.analysis.pivot</field>
        <field name="model">report.project.ticket.analysis</field>
        <field name="arch" type="xml">
        <pivot string="SLA Status Analysis" disable_linking="1" sample="1">
            <field name="create_date" type="row"/>
            <field name="open_ticket_hours" widget="float_time" type="measure"/>
            <field name="close_ticket_hours" widget="float_time" />
            <field name="ticket_deadline_hours" widget="float_time"/>
            <field name="rating_avg" type="measure" invisible="1"/>
         </pivot>
     </field>
    </record>
    
    <record id="action_dashboard_ticket_analysis_open_hours" model="ir.actions.act_window">
        <field name="name">Tickets Analysis</field>
        <field name="res_model">report.project.ticket.analysis</field>
        <field name="view_mode">pivot,graph,cohort</field>
        <field name="search_view_id" ref="report_project_ticket_analysis_search_view"/>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'pivot', 'view_id': ref('report_project_ticket_analysis_pivot_open_hours')}),
                (0, 0, {'view_mode': 'graph', 'view_id': ref('report_project_ticket_analysis_graph')}),
                (0, 0, {'view_mode': 'cohort', 'view_id': ref('report_project_ticket_sla_analysis_cohort')}),
            ]"/>
    </record>
</odoo>