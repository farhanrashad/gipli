<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Tree view -->
    <record id="project_helpdesk_tickets_tree_view" model="ir.ui.view">
        <field name="name">project.helpdesk.ticket.tree.view</field>
        <field name="model">project.task</field>
        <field name="arch" type="xml">
            <tree string="Tickets" multi_edit="1" sample="1" default_order="priority desc, sla_date_deadline, id">
                <field name="company_id" column_invisible="True"/>
                <field name="project_id" column_invisible="True"/>
                <field name="is_sla" column_invisible="True"/>
                <field name="id" />
                <field name="priority" optional="show" widget="priority"/>
                 <field name="name" string="Name"/>
                <field name="user_ids" optional="show" widget="many2many_avatar_user"/>
                <field name="partner_id" domain="['|', ('company_id', '=', False), ('company_id', '=', company_id)]" optional="show" options="{'no_open': True}"/>
                <field name="company_id" groups="base.group_multi_company" optional="show" readonly="1" column_invisible="context.get('default_project_id', False)"/>
                <field name="activity_ids" widget="list_activity" optional="show"/>
                <field name="sla_date_deadline" invisible="not is_sla" optional="show" widget="remaining_days"/>
                <field name="create_date" optional="hide" readonly="1" string="Creation Date"/>
                <field name="write_date" optional="hide" readonly="1"/>
                <field name="stage_id" optional="show" readonly="not context.get('default_project_id', False)"/>
            </tree>
        </field>
    </record>
    <!-- Search view -->
    <record id="project_helpdesk_ticket_search_view" model="ir.ui.view">
        <field name="name">project.helpdesk.ticket.search.view</field>
        <field name="model">project.task</field>
        <field name="arch" type="xml">
            <search string="Tickets Search">
                <field name="name"/>
                <field name="priority" invisible="1"/>
                <field name="project_id"/>
                <field name="user_ids"/>

                <filter string="My Tickets" domain="[('user_ids','in',uid)]" name="my_ticket"/>
                <filter string="Unassigned Tickets" domain="[('user_ids','=',False)]" name="unassigned"/>
                <separator/>
                <filter string="Open Tickets" domain="[('stage_id.fold', '=', False)]" name="is_open"/>
                <filter string="Closed Tickets" domain="[('stage_id.fold', '=', True)]" name="is_close"/>
                <separator/>
                <filter name="filter_create_date" date="create_date"/>
                <filter name="filter_sla_deadline" date="sla_date_deadline"/>
                <separator/>
                <separator/>
                <filter string="Archived" domain="[('active','=',False)]" name="archive"/>
                <group expand="0" string="Group By">
                  <filter string="Assignee" name="assignee" context="{'group_by':'user_ids'}"/>
                  <filter string="Helpdesk Team" name="team" context="{'group_by':'project_id'}"/>
                  <filter string="Creation Date" context="{'group_by':'create_date:week'}" name="group_by_create_date"/>
                </group>
            </search>
        </field>
    </record>
    
    <record id="action_project_helpdesk_my_task" model="ir.actions.act_window">
        <field name="name">Tickets</field>
        <field name="res_model">project.task</field>
        <field name="view_mode">tree,form</field>
         <field name="search_view_id" ref="project_helpdesk_ticket_search_view"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new ticket!
            </p><p>
                Creating a new ticket typically refers to initiating a request or reporting an issue within a ticketing system or customer support platform. This process involves providing relevant details such as the nature of the request or problem, any pertinent information, and contact details for follow-up communication. It serves as a means to track, prioritize, and resolve inquiries or concerns efficiently.
            </p>
        </field>
    </record>
      
    <menuitem name="My Tickets" id="menu_helpdesk_tickets_my_tickets"
            parent="menu_helpdesk_tickets" 
            action="action_project_helpdesk_my_task"
            sequence="10"
        />

    <record id="project_helpdesk_my_tickets_tree_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="project_helpdesk_tickets_tree_view"/>
        <field name="act_window_id" ref="action_project_helpdesk_my_task"/>
    </record>
    
    <!-- All Tickets -->
    <record id="action_project_helpdesk_all_task" model="ir.actions.act_window">
        <field name="name">Tickets</field>
        <field name="res_model">project.task</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="project_helpdesk_ticket_search_view"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new ticket!
            </p><p>
                Creating a new ticket typically refers to initiating a request or reporting an issue within a ticketing system or customer support platform. This process involves providing relevant details such as the nature of the request or problem, any pertinent information, and contact details for follow-up communication. It serves as a means to track, prioritize, and resolve inquiries or concerns efficiently.
            </p>
        </field>
    </record>
      
    <menuitem name="All Tickets" id="menu_helpdesk_tickets_all_tickets"
            parent="menu_helpdesk_tickets" 
            action="action_project_helpdesk_all_task"
            sequence="10"
        />

    <record id="project_helpdesk_all_tickets_tree_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="2"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="project_helpdesk_tickets_tree_view"/>
        <field name="act_window_id" ref="action_project_helpdesk_all_task"/>
    </record>
</odoo>