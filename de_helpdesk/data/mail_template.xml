<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <record id="new_ticket_confirmation_to_customer" model="mail.template">
            <field name="name">Helpdesk: Ticket Acknowledgement</field>
            <field name="model_id" ref="de_helpdesk.model_project_task"/>
            <field name="subject">{{ object.display_name }}</field>
            <field name="email_from">{{ (object.project_id.alias_email or object.company_id.email_formatted or user.email_formatted) }}</field>
            <field name="email_to">{{ (object.partner_email if not object.sudo().partner_id.email or object.sudo().partner_id.email != object.partner_email else '') }}</field>
            <field name="partner_to">{{ object.partner_id.id if object.sudo().partner_id.email and object.sudo().partner_id.email == object.partner_email else '' }}</field>
            <field name="description">
                Automatically send customers a confirmation email upon receipt of their helpdesk ticket, informing them that it is currently under review by our helpdesk team. Set this email template to trigger when a ticket reaches a designated stage in our helpdesk process.
            </field>
            <field name="body_html" type="html">
                <div>
                    Dear <t t-out="object.sudo().partner_id.name or object.sudo().partner_name or 'Madam/Sir'">Madam/Sir</t>,<br /><br />

                    This email is to confirm that we have received your request <t t-if="object.get_portal_url()">
                        <a t-attf-href="/my/desk/ticket/{{ object.id }}/{{ object.access_token }}" t-out="object.name or ''">Software is malfuntining</a>
                    </t>. Our <t t-out="object.project_id.name or ''">Customer Support</t> team is now reviewing your request and will get back to you shortly.
 <br/><br/>
                    The reference for your ticket is <strong><t t-out="object.ticket_no or ''">15</t></strong>.<br /><br/>

                
                    To provide any additional information, please reply directly to this email.<br/><br/>
                    
                    <t t-if="object.project_id.allow_portal_user_close_ticket">
                        Please feel free to close your ticket if further assistance is not required. We appreciate your collaboration.<br/><br/>
                    </t>

                <div style="text-align: center; padding: 16px 0px 16px 0px;">
                    <a style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;" t-att-href="object.get_portal_url()" target="_blank">View Ticket</a>
                    <t t-if="object.project_id.allow_portal_user_close_ticket">
                        <a style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;" t-att-href="'/my/desk/ticket/close/%s/%s' % (object.id, object.access_token)" target="_blank">Close Ticket</a>
                    </t>
                    
                </div>
            
                    Best regards,<br/><br/>
                    <t t-out="object.project_id.name or 'Helpdesk'">Helpdesk</t> Team
                </div>
            </field>
            <field name="lang">{{ object.partner_id.lang or object.user_id.lang or user.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <record id="close_ticket_confirmation_to_customer" model="mail.template">
            <field name="name">Helpdesk: Ticket Closed</field>
            <field name="model_id" ref="de_helpdesk.model_project_task"/>
            <field name="subject">Ticket# {{ object.ticket_no if object.ticket_no else 15 }} has closed.</field>
            <field name="email_from">{{ (object.project_id.alias_email or object.company_id.email_formatted or  user.email_formatted) }}</field>
            <field name="email_to">{{ (object.partner_email if not object.sudo().partner_id.email or object.sudo().partner_id.email != object.partner_email else '') }}</field>
            <field name="partner_to">{{ object.partner_id.id if object.sudo().partner_id.email and object.sudo().partner_id.email == object.partner_email else '' }}</field>
            <field name="description">Set this template to automatically send emails when tasks reach specific stages in a project.</field>
            <field name="body_html" type="html">
                <div>
                    Dear <t t-out="object.sudo().partner_id.name or 'Madam/Sir'">Madam/Sir</t>,<br /><br />
            
                    We are pleased to inform you that your support ticket #[<t t-out="object.id or ''">15</t>] has been successfully resolved. Our team has addressed the issue, and we believe that it has been satisfactorily resolved.<br/><br/>
            Should you have any further questions or require additional assistance, please do not hesitate to reach out to us. We are always here to help.
            <br/><br/>
                    We greatly appreciate your cooperation and support. Please take a moment to provide your valuable feedback.<br/><a style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;" t-att-href="'/my/desk/ticket/rating/%s/%s' % (object.id, object.access_token)" target="_blank">Submit Feedback</a><br/><br/>
            
                    Best regards,<br /><br />
                    <t t-out="object.project_id.name or 'Helpdesk'">Helpdesk</t> Team.
                </div>
            </field>
            <field name="lang">{{ object.partner_id.lang or object.user_id.lang or user.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <record id="feedback_request_to_customer" model="mail.template">
            <field name="name">Helpdesk: Request for Ticket Rating</field>
            <field name="model_id" ref="de_helpdesk.model_project_task"/>
            <field name="subject">{{ object.company_id.name or object.user_id.company_id.name or 'Helpdesk' }}: Share Your Feedback</field>
            <field name="email_from">{{ (object.project_id.alias_email or object.company_id.email_formatted or object._rating_get_operator().email_formatted or user.email_formatted) }}</field>
            <field name="email_to">{{ (object.partner_email if not object.sudo().partner_id.email or object.sudo().partner_id.email != object.partner_email else '') }}</field>
            <field name="partner_to">{{ object.partner_id.id if object.sudo().partner_id.email and object.sudo().partner_id.email == object.partner_email else '' }}</field>
            <field name="description">Enable "customer ratings" feature on the helpdesk team</field>
            <field name="body_html" type="html">
                <div>
                    Dear <t t-out="object.sudo().partner_id.name or 'Madam/Sir'">Madam/Sir</t>,<br /><br />
            
                    We would greatly appreciate your feedback on the recent resolution of your support ticket. We value your experience and would appreciate your feedback on our support process.<br/><br/>                    
                    We greatly appreciate your cooperation and support. Please take a moment to provide your valuable feedback.<br/><a style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;" t-att-href="'/my/desk/ticket/rating/%s/%s' % (object.id, object.access_token)" target="_blank">Submit Feedback</a><br/><br/>
            
                    Best regards,<br /><br />
                    <t t-out="object.project_id.name or 'Helpdesk'">Helpdesk</t> Team.
                </div>
            </field>
            <field name="lang">{{ object.partner_id.lang or object.user_id.lang or user.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>
    </data>
</odoo>
