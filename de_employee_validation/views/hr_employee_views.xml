<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="view_employee_filter_inherit_validation" model="ir.ui.view">
        <field name="name">view.employee.filter.inherit.validation</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='inactive']" position="after">
                <separator/>
                <filter string="Draft" name="draft" domain="[('state', '=', 'draft')]"/>
                <filter string="Pending" name="pending" domain="[('state', '=', 'pending')]"/>
                <filter string="Approved" name="approved" domain="[('state', '=', 'approved')]"/>
            </xpath>
            <xpath expr="//filter[@name='group_manager']" position="before">
                <filter name="group_state" string="Status" domain="[]" context="{'group_by': 'state'}"/>
                <separator/>
            </xpath>
        </field>
    </record>
    <record id="view_employee_form_validation" model="ir.ui.view">
        <field name="name">view.employee.form.validation</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                    <button name="button_submit"  string="Submit for Approval" type="object" class="oe_highlight" groups="de_employee_validation.group_employee_user" attrs="{'invisible':[('state','!=','draft')]}"/>
                    <button name="button_confirm"  string="Approve" type="object" class="oe_highlight" groups="de_employee_validation.group_employee_manager" attrs="{'invisible':[('state','!=','pending')]}"/>
                    <button name="button_refuse"  string="Refuse" type="object" class="" groups="de_employee_validation.group_employee_manager" attrs="{'invisible':[('state','!=','pending')]}"/>

                    <button name="button_draft"  groups="de_employee_validation.group_employee_user" string="Reset to Draft" type="object" attrs="{'invisible':[('state','not in',['approved'])]}"/>                    
                    <field name="state" widget="statusbar" statusbar_visible="draft,pending,approved"/>
                    
            </xpath>
            <xpath expr="//group[1]/group[1]" position="inside">
                <field name="no_edit_mode" invisible="1"/>
            </xpath>
        </field>
    </record>

    <record id='view_employee_kanban_inherit_validation' model='ir.ui.view'>
        <field name="name">view.employee.kanban.inherit.validation</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.hr_kanban_view_employees"/>
        <field name="arch" type="xml">
            <field name="user_partner_id" position="after">
                <field name="state" />
            </field>
            <xpath expr="//div[hasclass('oe_kanban_content')]" position="inside">
                <div class="o_kanban_record_bottom">
                    <div class="oe_kanban_bottom_left"/>
                    <div class="oe_kanban_bottom_right float-end pe-auto">
                        <div class="hr_state_container mb-1 me-n1">
                            <field name="state" widget="label_selection" options="{'classes': {'draft': 'default', 'approved': 'success', 'pending': 'warning'}}"/>
                        </div>
                    </div>
                </div>                
            </xpath>
        </field>
    </record>
</odoo>