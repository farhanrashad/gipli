<odoo>
    <data>
        <record id="school_attendance_form_view" model="ir.ui.view">
            <field name="name">school.atendance_form.view</field>
            <field name="model">oe.school.attendance</field>
            <field name="arch" type="xml">
                <form string="Attendance">
                    <header>
                        <button class="oe_highlight" name="button_present" states="draft" string="Present" type="object"/>
                        <button name="button_absent" states="draft" string="Absent" type="object"/>
                        <field name="state" statusbar_visible="draft,present,absent" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group col="4">
                            <field name="school_year_id" options="{'no_create': True}"/>
                            <field name="date_attendance"/>
                            <field force_save="1" invisible="1" name="by_period"/>
                            <field invisible="1" name="company_id"/>
                            <field domain="[('is_student','=',True)]" name="student_id"/>
                            <field attrs="{'invisible': [('by_period', '=',False)], 'required': [('by_period', '=', True)]}" name="period_id"/>
                            <field name="course_id"/>
                        </group>
                        <group>
                            <field name="subject_id"/>
                            <field name="batch_id"/>
                            <field name="is_late"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
        
        
        
        <record id="school_attendance_tree_view" model="ir.ui.view">
            <field name="name">school_attendance_tree view</field>
            <field name="model">oe.school.attendance</field>
            <field name="arch" type="xml">
                <tree string="Attendance">
                    <field name="name"/>
                    <field name="school_year_id"/>
                    <field name="date_attendance"/>
                    <field name="student_id"/>
                    <field name="period_id"/>
                    <field name="course_id"/>
                    <field name="subject_id"/>
                    <field name="batch_id"/>
                    <field name="is_late"/>
                    <field decoration-info="state == 'draft'" decoration-muted="state == 'absent'" decoration-success="state == 'present'" name="state" widget="badge"/>
                </tree>
            </field>
        </record>
        
        
        
        <record id="de_school_attendance_kanban_view" model="ir.ui.view">
            <field name="name">de.school.attendance.kanban</field>
            <field name="model">oe.school.attendance</field>
            <field name="priority">10</field>
            <field name="arch" type="xml">
                <kanban class="o_hr_employee_kanban" js_class="hr_employee_kanban" sample="1">
                    <field name="name"/>
                    <field name="student_id"/>
                    <field name="course_id"/>
                    <field name="date_attendance"/>
                    <field name="subject_id"/>
                    <field name="state"/>
                    <field name="school_year_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_card oe_kanban_global_click">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                        <div class="float-end" name="student_present" t-if="record.state.raw_value == 'present'">
                                            <!-- Employee is present/connected and it is normal according to his work schedule  -->
                                            <span aria-label="Present" class="fa fa-circle text-success" name="student_present" role="img" title="Present"/>
                                        </div>
                                        <div class="float-end" name="student_absent" t-if="record.state.raw_value == 'absent'">
                                            <!-- Employee is not present and it is normal according to his work schedule -->
                                            <span aria-label="Absent" class="fa fa-circle-o text-muted" name="student_absent" role="img" title="Absent"/>
                                        </div>
                                        <div class="float-end" name="student_draft" t-if="record.state.raw_value == 'draft'">
                                            <!-- Employee is connected but according to his work schedule,
                                                         he should not work for now  -->
                                            <span aria-label="Present but not active" class="fa fa-circle text-warning" name="presence_absent_active" role="img" title="Present but not active"/>
                                        </div>
                                    </strong>
                                    <strong>Student:</strong>
                                    <field name="student_id"/>
                                </div>
                                <t t-if="record.date_attendance">
                                    <strong>Attendance date:</strong>
                                    <field name="date_attendance"/>
                                </t>
                                <div>
                                    <strong>Course:</strong>
                                    <field name="course_id"/>
                                </div>
                                <div>
                                    <strong>subject:</strong>
                                    <field name="subject_id"/>
                                </div>
                                <div>
                                    <strong>State:</strong>
                                    <field name="state"/>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        
        
        
        <record id="action_school_attendance" model="ir.actions.act_window">
            <field name="name">School Attendance</field>
            <field name="res_model">oe.school.attendance</field>
            <!-- <field name="context"></field> -->
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="school_attendance_tree_view"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Add a new record
                </p>
            </field>
        </record>
        
        
        
        <menuitem id="menu_school_attendance_root" name="School Attendance"/>
        <menuitem id="menu_de_attendance_root"
                  name="Atendances" 
                  sequence="1"
                  parent="menu_school_attendance_root"/>
                  
                  
        <menuitem action="action_school_attendance" id="menu_school_attendance" name="Attendance" parent="menu_de_attendance_root"/>
     
     
     
     
        <record id="view_partner_form_inherit" model="ir.ui.view">
            <field name="name">Partner Form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//group[1]" position="before">
                    <group>
                        <group>
                            <field name="is_student"/>
                        </group>
                    </group>
                </xpath>
            </field>
        </record>
    </data>
</odoo>
