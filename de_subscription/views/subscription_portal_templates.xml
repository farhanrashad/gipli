<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Add Breadcrumb -->
    <template id="subscription_portal_layout" name="Portal layout: subscription menu entry" inherit_id="portal.portal_breadcrumbs" priority="40">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-elif="page_name == 'subscription_order' or sale_order and sale_order.state not in ('sent', 'cancel')" t-attf-class="breadcrumb-item #{'active ' if not sale_order else ''}">
                <a t-if="sale_order" t-attf-href="/my/suborders?{{ keep_query() }}">Subscription Orders</a>
                <t t-else="">Subscription Orders</t>
            </li>
            <li t-if="sale_order" class="breadcrumb-item active">
                <span t-field="sale_order.type_name"/>
                <t t-out="sale_order.name"/>
            </li>
            
        </xpath>
    </template>
    
    <!-- Add Menu -->
    <template id="portal_my_home_sale_subscription_orer" name="Show Subscription Orders" customize_show="True" inherit_id="portal.portal_my_home" priority="40">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="before">
            <t t-set="portal_client_category_enable" t-value="True"/>
            this is test
        </xpath>

        <div id="portal_client_category" position="inside">
            <t t-call="portal.portal_docs_entry">
                <t t-set="icon" t-value="'/sale/static/src/img/bag.svg'"/>
                <t t-set="title">Subscription Orders</t>
                <t t-set="url" t-value="'/my/suborders'"/>
                <t t-set="text">Manage Your Subscription Orders</t>
                <t t-set="placeholder_count" t-value="'subscription_count'"/>
            </t>
        </div>
    </template>

    <!-- List of orders -->
    <template id="portal_my_subscription_orders" name="My Subscription Orders">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Your Subscriptions</t>
            </t>
            <div t-if="not subscription_orders" class="alert alert-warning" role="alert">
                There are currently no subscriptions for your account.
            </div>
            <t t-if="subscription_orders" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>
                            <span class='d-none d-md-inline'>Sales Order #</span>
                            <span class='d-block d-md-none'>Ref.</span>
                        </th>
                        <th class="text-end">Order Date</th>
                        <th class="text-center"/>
                        <th class="text-end">Total</th>
                    </tr>
                </thead>
                <t t-foreach="subscription_orders" t-as="order">
                    <tr>
                        <td><a t-att-href="order.get_portal_url()"><t t-out="order.name"/></a></td>
                        <td class="text-end">
                            <span t-field="order.date_order" t-options="{'widget': 'date'}"/>&amp;nbsp;
                            <span class='d-none d-md-inline' t-field="order.date_order" t-options="{'time_only': True}"/>
                        </td>
                        <td class="text-center">
                            <span t-if="order.locked"  class="badge rounded-pill text-bg-success">
                                <i class="fa fa-fw fa-check" role="img" aria-label="Done" title="Done"/>Done
                            </span>
                        </td>
                        <td class="text-end"><span t-field="order.amount_total"/></td>
                    </tr>
                </t>
            </t>
            <p t-else="">There are currently no orders for your account.</p>
        </t>
    </template>
</odoo>